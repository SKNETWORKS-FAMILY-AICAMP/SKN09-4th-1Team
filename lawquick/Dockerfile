# 1. Python ë² ì´ìŠ¤ ì´ë¯¸ì§€ ì„ íƒ
FROM python:3.12

# 2. íŒŒì´ì¬ ìºì‹œ ë° ë²„í¼ë§ ì„¤ì •
ENV PYTHONDONTWRITEBYTECODE=1
ENV PYTHONUNBUFFERED=1

# 3. ì‘ì—… ë””ë ‰í† ë¦¬ ìƒì„±
WORKDIR /app

# 4. requirements ë³µì‚¬ ë° ì„¤ì¹˜
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# 5. ì „ì²´ í”„ë¡œì íŠ¸ ë³µì‚¬
COPY . .

# 6. static íŒŒì¼ ìˆ˜ì§‘
RUN python manage.py collectstatic --noinput

# ğŸ”¥ (ì„ íƒ) ë§ˆì´ê·¸ë ˆì´ì…˜ì€ Dockerfileì—ì„œ í•˜ì§€ ë§ˆ!
# â†’ ì‹¤ì œ ì‹¤í–‰í•  ë•Œ docker-composeë¡œ runí•˜ê±°ë‚˜ CMDì—ì„œ ì²˜ë¦¬

# 7. Gunicorn ì„œë²„ ì‹¤í–‰
CMD ["gunicorn", "lawquick.wsgi:application", "--config", "gunicorn.conf.py"]
